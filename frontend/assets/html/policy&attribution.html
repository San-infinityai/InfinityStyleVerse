<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:wght@100..900&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --sidebar-width: 200px;
            --dark-bg: #161616;
            --header-height: 70px;
            --dark-bg: #222222;
            --light-bg: #f8f8f8;
            --accent-color: #c19a6b;
            --text-dark: #333333;
            --text-light: #ffffff;
            --text-gray: #666666;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --edit-btn-color: #e0f2f7;
            --edit-text-color: #0d7088;
            --delete-btn-color: #fce4ec;
            --delete-text-color: #b71c24;
            --assign-btn-color: #ffffff;
            --assign-text-color: #155724;
            --success-color: #28a745;
            --error-color: #dc3545;
            --info-color: #17a2b8;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-bg);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 0.875rem;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--dark-bg);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            padding: 18px;
            position: fixed;
            height: 100vh;
        }

        .sidebar a.active {
            background-color: #c19a6b;
            color: #ffffff;
            font-weight: bold;
        }

        .sidebar a.active i {
            color: #ffffff;
        }

        .bg-custom-dark {
            background-color: var(--dark-bg);
        }

        .text-custom-light {
            color: var(--text-light);
        }

        .bg-custom-accent {
            background-color: var(--accent-color);
        }

        .text-custom-accent {
            color: var(--accent-color);
        }

        .timeline-item {
            position: relative;
            padding-left: 2rem;
            font-size: 0.75rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0.5rem;
            width: 0.75rem;
            height: 0.75rem;
            background-color: var(--accent-color);
            border-radius: 50%;
            border: 2px solid var(--card-bg);
            box-shadow: 0 0 0 2px var(--accent-color);
        }

        .timeline-item:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 0.85rem;
            top: 1.5rem;
            bottom: 0;
            width: 2px;
            background-color: var(--border-color);
        }

        .rotate-90 {
            transform: rotate(90deg);
        }

        .main-content {
            flex-grow: 1;
            padding: 1.5rem;
            margin-left: var(--sidebar-width);
            overflow-y: auto;
        }

        h1 {
            font-size: 1.5rem;
        }

        h2 {
            font-size: 1.25rem;
        }

        h3 {
            font-size: 1rem;
        }

        .text-xl {
            font-size: 1rem;
        }


        .uplift-container {
            position: relative;
        }

        .uplift-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-bottom: 20px;

        }

        .uplift-message {
            margin-top: 1rem;
            font-size: 1rem;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>

<body class="flex h-screen">
    <div
        class="sidebar w-64 h-screen bg-custom-dark text-custom-light p-6 flex flex-col justify-between shadow-2xl overflow-hidden">
        <div>

            <div class="text-[20px] font-bold mb-8 font-['Inter'] text-[#c19a6b] text-center">StyleVerse</div>


            <nav class="space-y-3 text-sm font-['DM Sans']">
                <a href="#" id="dashboard-link"
                    class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10">
                    <i class="fas fa-th-large text-lg w-5"></i>
                    <span>Dashboard</span>
                    <i id="dashboard-arrow"
                        class="fa-solid fa-angle-right w-3 h-3 ml-auto transform transition-transform duration-200"></i>
                </a>
                <div id="dashboard-submenu" class="ml-6 space-y-3 hidden text-xs">
                    <a href="user.html"
                        class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10">
                        <i class="fa-solid fa-users text-lg w-5"></i>
                        <span>Users</span>
                    </a>
                    <a href="roles.html"
                        class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10">
                        <i class="fa-solid fa-user-shield text-lg w-5"></i>
                        <span>Roles</span>
                    </a>
                    <a href="permission.html"
                        class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10">
                        <i class="fa-solid fa-unlock text-lg w-5"></i>
                        <span>Permissions</span>
                    </a>
                </div>
                <a href="#" id="experiments-link"
                    class="flex items-center space-x-4 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10 active">
                    <i class="fa-solid fa-flask text-lg w-5"></i>
                    <span>Experiments</span>
                </a>


                <a href="#" id="policy-link"
                    class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 hover:bg-white hover:bg-opacity-10">
                    <i class="fa-solid fa-scroll text-lg w-5"></i>
                    <span>Policy & Attribution</span>
                </a>
            </nav>
        </div>

        <div class="mt-8 text-xs font-['DM Sans']">
            <a href="#"
                class="flex items-center space-x-6 p-2 rounded-lg transition duration-200 bg-gray-500 bg-opacity-30 hover:bg-opacity-50">
                <i class="fa-solid fa-right-from-bracket text-lg w-5"></i>
                <span>Logout</span>
            </a>
            <div class="flex items-center mt-4 p-2 space-x-4">
                <img class="w-8 h-8 rounded-full border-2 border-white"
                    src="Image.png" alt="User Profile Picture">
                <span class="text-xs font-medium">Jenifer winget</span>
            </div>
        </div>
    </div>

    <div class="main-content flex-grow p-6 ml-64">
        <div id="experiments-section" class="max-w-7xl mx-auto bg-white rounded-lg shadow-lg p-6">
            <header class="mb-6">
                <h1
                    class="text-xl font-bold text-center bg-custom-dark text-custom-light py-3 px-5 rounded-lg shadow-md font-['Inter']">
                    Experiments Console</h1>
            </header>

            <section id="create-experiment" class="mb-6 p-5 border rounded-lg shadow-sm bg-gray-50">
                <h2 class="text-lg font-semibold mb-3 font-['Nunito Sans']">Create New Experiment</h2>
                <form id="experiment-form" class="grid grid-cols-1 md:grid-cols-2 gap-5 font-['Nunito Sans']">
                    <div>
                        <label for="exp-name" class="block text-xs font-medium text-gray-700">Experiment Name</label>
                        <input type="text" id="exp-name"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-custom-accent focus:ring-custom-accent text-xs">
                    </div>
                    <div>
                        <label for="task" class="block text-xs font-medium text-gray-700">Task</label>
                        <select id="task"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-custom-accent focus:ring-custom-accent text-xs">
                            <option>outfit recommendation</option>
                            <option>price nudge</option>
                        </select>
                    </div>
                    <div>
                        <label for="split" class="block text-xs font-medium text-gray-700">Population Split</label>
                        <input type="text" id="split" value="50/50"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-custom-accent focus:ring-custom-accent text-xs">
                    </div>
                    <div>
                        <label for="metric" class="block text-xs font-medium text-gray-700">Primary Metric</label>
                        <select id="metric"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-custom-accent focus:ring-custom-accent text-xs">
                            <option>CTR</option>
                            <option>CVR</option>
                            <option>AOV</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <button type="submit"
                            class="w-full py-2 px-3 border border-transparent rounded-md shadow-sm text-xs font-medium text-white bg-custom-accent hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-accent transition">
                            Launch Experiment
                        </button>
                    </div>
                </form>
                <div id="status-message" class="mt-3 text-center text-xs font-medium hidden"></div>
            </section>

            <section id="active-experiments" class="mb-6">
                <h2 class="text-lg font-semibold mb-3 font-['Nunito Sans']">Active Experiments</h2>
                <div id="experiments-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                </div>
            </section>

            <section id="uplift-chart-container" class="p-5 border rounded-lg shadow-sm bg-gray-50 uplift-container">
                <h2 class="text-lg font-semibold mb-3 font-['Nunito Sans']">Uplift Visualization</h2>
                <div id="uplift-content" class="uplift-content">
                    <canvas id="upliftChart" class="w-full h-80"></canvas>
                    <div id="uplift-message" class="uplift-message"></div>
                </div>
                <div id="no-data-message" class="text-center text-gray-500 mt-3 text-sm hidden">Select an experiment to
                    see data.</div>
            </section>
        </div>

        <div id="policy-section" class="max-w-7xl mx-auto bg-white rounded-lg shadow-lg p-6 hidden">
            <header class="mb-6">
                <h1
                    class="text-xl font-bold text-center bg-custom-dark text-custom-light py-3 px-5 rounded-lg shadow-md font-['Inter']">
                    Policy & Attribution Explorer</h1>
            </header>

            <section id="policy-dashboard" class="mb-6 p-5 border rounded-lg shadow-sm bg-gray-50">
                <h2 class="text-lg font-semibold mb-3 font-['Nunito Sans']">Policy Dashboard</h2>
                <div id="policies-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                    <div class="bg-white p-5 rounded-lg shadow-md border-t-4 border-custom-accent">
                        <h3 class="text-base font-bold text-custom-accent mb-2 font-['Nunito Sans']">Outfit
                            Recommendation</h3>
                        <p class="text-xs text-gray-600 mb-1"><strong>Active Policy:</strong> pol_rec_v5</p>
                        <p class="text-xs text-gray-600 mb-1"><strong>Version:</strong> 5</p>
                        <p class="text-xs text-gray-600 mb-1"><strong>Rollout %:</strong> 100%</p>
                        <p class="text-xs text-gray-600"><strong>Exploration Rate:</strong> 5%</p>
                    </div>
                    <div class="bg-white p-5 rounded-lg shadow-md border-t-4 border-custom-accent">
                        <h3 class="text-base font-bold text-custom-accent mb-2 font-['Nunito Sans']">Price Nudge</h3>
                        <p class="text-xs text-gray-600 mb-1"><strong>Active Policy:</strong> pol_price_v3</p>
                        <p class="text-xs text-gray-600 mb-1"><strong>Version:</strong> 3</p>
                        <p class="text-xs text-gray-600 mb-1"><strong>Rollout %:</strong> 75%</p>
                        <p class="text-xs text-gray-600"><strong>Exploration Rate:</strong> 10%</p>
                    </div>
                </div>
            </section>

            <section id="attribution-viewer" class="p-5 border rounded-lg shadow-sm bg-gray-50">
                <h2 class="text-lg font-semibold mb-3 font-['Nunito Sans']">Attribution Viewer</h2>
                <div class="flex flex-col md:flex-row gap-3 mb-4">
                    <input type="text" id="request-id-input"
                        class="flex-grow rounded-md border-gray-300 shadow-sm focus:border-custom-accent focus:ring-custom-accent text-xs"
                        placeholder="Enter request_id (e.g., req_123)">
                    <button id="search-btn"
                        class="py-2 px-3 border border-transparent rounded-md shadow-sm text-xs font-medium text-white bg-custom-accent hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-accent transition">
                        Search Trace
                    </button>
                </div>
                <div id="attribution-results" class="space-y-5">
                </div>
            </section>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const experimentForm = document.getElementById('experiment-form');
            const experimentsList = document.getElementById('experiments-list');
            const statusMessage = document.getElementById('status-message');
            const noDataMessage = document.getElementById('no-data-message');
            const upliftChartContainer = document.getElementById('uplift-chart-container');
            const upliftContent = document.getElementById('uplift-content');
            const upliftMessage = document.getElementById('uplift-message');
            const ctx = document.getElementById('upliftChart').getContext('2d');
            let myChart = null;

            const experimentsSection = document.getElementById('experiments-section');
            const policySection = document.getElementById('policy-section');
            const experimentsLink = document.getElementById('experiments-link');
            const policyLink = document.getElementById('policy-link');
            const searchBtn = document.getElementById('search-btn');
            const requestIdInput = document.getElementById('request-id-input');
            const attributionResults = document.getElementById('attribution-results');

            const dashboardLink = document.getElementById('dashboard-link');
            const dashboardSubmenu = document.getElementById('dashboard-submenu');
            const dashboardArrow = document.getElementById('dashboard-arrow');

            const experiments = [{
                id: 'exp_1',
                name: 'Outfit Rec V2',
                task: 'outfit recommendation',
                status: 'active',
                split: '50/50',
                kpis: {
                    control: {
                        ctr: 0.05,
                        cvr: 0.02
                    },
                    variant_A: {
                        ctr: 0.065,
                        cvr: 0.025
                    }
                }
            }, {
                id: 'exp_2',
                name: 'Price Nudge Test',
                task: 'price nudge',
                status: 'paused',
                split: '80/20',
                kpis: {
                    control: {
                        aov: 50.00
                    },
                    variant_A: {
                        aov: 55.50
                    }
                }
            }];

            const sampleTraces = {
                'req_123': {
                    decision: {
                        id: 'req_123',
                        policy: 'pol_rec_v5',
                        task: 'outfit recommendation',
                        timestamp: '2023-10-27T10:00:00Z',
                        chosen_item: 'skul',
                        score: 0.81
                    },
                    events: [{
                        type: 'impression',
                        value: 1,
                        timestamp: '2023-10-27T10:00:01Z'
                    }, {
                        type: 'click',
                        value: 1,
                        timestamp: '2023-10-27T10:00:15Z'
                    }, {
                        type: 'purchase',
                        value: 1,
                        timestamp: '2023-10-27T10:02:30Z'
                    }],
                    reward: {
                        value: 1.0,
                        components: {
                            click: 0.1,
                            purchase: 1.0
                        },
                        timestamp: '2023-10-27T10:03:00Z'
                    }
                }
            };
            const setActiveLink = (activeId) => {
                document.querySelectorAll('.sidebar a').forEach(link => {
                    link.classList.remove('active');
                });
                document.getElementById(activeId).classList.add('active');
            };

            experimentsLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('experiments');
                renderExperiments();
                setActiveLink('experiments-link');
            });

            policyLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('policy');
                setActiveLink('policy-link');
            });

            const showSection = (sectionId) => {
                if (sectionId === 'experiments') {
                    experimentsSection.classList.remove('hidden');
                    policySection.classList.add('hidden');
                    experimentsLink.classList.add('bg-white', 'bg-opacity-20', 'font-bold');
                    policyLink.classList.remove('bg-white', 'bg-opacity-20', 'font-bold');
                } else if (sectionId === 'policy') {
                    policySection.classList.remove('hidden');
                    experimentsSection.classList.add('hidden');
                    policyLink.classList.add('bg-white', 'bg-opacity-20', 'font-bold');
                    experimentsLink.classList.remove('bg-white', 'bg-opacity-20', 'font-bold');
                }
            };

            const renderExperiments = () => {
                experimentsList.innerHTML = '';
                experiments.forEach(exp => {
                    const card = document.createElement('div');
                    card.className = 'bg-white p-5 rounded-lg shadow-md border-t-4 border-custom-accent';
                    card.innerHTML = `
                        <h3 class="text-base font-bold text-custom-accent mb-2 font-['Nunito Sans']">${exp.name}</h3>
                        <p class="text-xs text-gray-600 mb-1 font-['Nunito Sans']"><strong>ID:</strong> ${exp.id}</p>
                        <p class="text-xs text-gray-600 mb-1 font-['Nunito Sans']"><strong>Task:</strong> ${exp.task}</p>
                        <p class="text-xs text-gray-600 mb-1 font-['Nunito Sans']"><strong>Status:</strong> <span class="font-semibold capitalize">${exp.status}</span></p>
                        <div class="mt-3 flex space-x-2">
                            <button class="view-btn py-1 px-2 bg-custom-accent text-white text-xs rounded-md shadow-sm transition hover:bg-opacity-90" data-id="${exp.id}">View Details</button>
                            <button class="status-btn py-1 px-2 bg-slate-500 text-white text-xs rounded-md shadow-sm transition hover:bg-opacity-90" data-id="${exp.id}" data-status="${exp.status}">${exp.status === 'active' ? 'Stop' : 'Start'}</button>
                        </div>
                    `;
                    experimentsList.appendChild(card);
                });
            };

            const renderChart = (experiment) => {
                let kpi, controlValue, variantValue;
                if (experiment.task === 'outfit recommendation') {
                    kpi = 'ctr';
                    controlValue = experiment.kpis.control.ctr;
                    variantValue = experiment.kpis.variant_A.ctr;
                } else if (experiment.task === 'price nudge') {
                    kpi = 'aov';
                    controlValue = experiment.kpis.control.aov;
                    variantValue = experiment.kpis.variant_A.aov;
                }

                const uplift = ((variantValue - controlValue) / controlValue) * 100;
                let messageText = '';
                let messageColor = '';

                if (uplift > 0) {
                    messageText = `✅ Significant Uplift! The variant improved ${kpi.toUpperCase()} by ${uplift.toFixed(2)}% compared to control.`;
                    messageColor = 'text-green-600';
                } else if (uplift < 0) {
                    messageText = `❌ Negative Uplift. The variant decreased ${kpi.toUpperCase()} by ${Math.abs(uplift).toFixed(2)}%. Consider stopping the experiment.`;
                    messageColor = 'text-red-600';
                } else {
                    messageText = `⚠️ No significant change. The variant had a ${uplift.toFixed(2)}% uplift. More data may be needed.`;
                    messageColor = 'text-yellow-600';
                }

                if (myChart) {
                    myChart.destroy();
                }

                Chart.register(ChartDataLabels);

                myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Control', `Variant A`],
                        datasets: [{
                            label: `KPI: ${kpi.toUpperCase()}`,
                            data: [controlValue, variantValue],
                            backgroundColor: ['#222222', '#c19a6b'],
                            borderColor: ['#222222', '#c19a6b'],
                            borderWidth: 1,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: `Uplift for ${experiment.name}`,
                                font: {
                                    family: 'Nunito Sans',
                                    size: 14
                                }
                            },
                            datalabels: {
                                anchor: 'end',
                                align: 'top',
                                formatter: function (value, context) {
                                    return value.toFixed(2);
                                },
                                font: {
                                    weight: 'bold',
                                    size: 12
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    font: {
                                        size: 10
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                });

                upliftMessage.textContent = messageText;
                upliftMessage.className = `uplift-message ${messageColor}`;
                noDataMessage.classList.add('hidden');
                upliftContent.classList.remove('hidden');
            };

            dashboardLink.addEventListener('click', (e) => {
                e.preventDefault();
                dashboardSubmenu.classList.toggle('hidden');
                dashboardArrow.classList.toggle('rotate-90');
            });

            experimentsLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('experiments');
                renderExperiments();
            });

            policyLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('policy');
            });

            experimentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newExp = {
                    id: `exp_${experiments.length + 1}`,
                    name: document.getElementById('exp-name').value || 'New Experiment',
                    task: document.getElementById('task').value,
                    status: 'active',
                    split: document.getElementById('split').value,
                    kpis: {
                        control: {
                            ctr: Math.random() * 0.1,
                            cvr: Math.random() * 0.05,
                            aov: Math.random() * 100 + 50
                        },
                        variant_A: {
                            ctr: Math.random() * 0.1,
                            cvr: Math.random() * 0.05,
                            aov: Math.random() * 100 + 50
                        }
                    }
                };
                experiments.push(newExp);
                renderExperiments();
                statusMessage.textContent = 'Experiment launched successfully!';
                statusMessage.classList.remove('hidden');
                statusMessage.classList.add('text-green-600');
                experimentForm.reset();
            });

            experimentsList.addEventListener('click', (e) => {
                if (e.target.classList.contains('view-btn')) {
                    const id = e.target.dataset.id;
                    const experiment = experiments.find(exp => exp.id === id);
                    if (experiment) {
                        renderChart(experiment);
                    }
                } else if (e.target.classList.contains('status-btn')) {
                    const id = e.target.dataset.id;
                    const experiment = experiments.find(exp => exp.id === id);
                    if (experiment) {
                        if (experiment.status === 'active') {
                            experiment.status = 'paused';
                            e.target.textContent = 'Start';
                            e.target.classList.remove('bg-custom-accent');
                            e.target.classList.add('bg-green-600');
                        } else {
                            experiment.status = 'active';
                            e.target.textContent = 'Stop';
                            e.target.classList.remove('bg-green-600');
                            e.target.classList.add('bg-custom-accent');
                        }
                        renderExperiments();
                    }
                }
            });

            searchBtn.addEventListener('click', () => {
                const requestId = requestIdInput.value.trim();
                const trace = sampleTraces[requestId];

                attributionResults.innerHTML = '';
                if (trace) {
                    const traceContainer = document.createElement('div');
                    traceContainer.className = 'bg-white p-5 rounded-lg shadow-md';
                    traceContainer.innerHTML = `
                        <h3 class="text-base font-bold text-custom-accent mb-3 font-['Nunito Sans']">Trace for Request ID: ${trace.decision.id}</h3>
                        <div class="space-y-4">
                            <div class="timeline-item">
                                <p class="text-xs font-semibold">Decision Logged</p>
                                <p class="text-xs text-gray-500">${new Date(trace.decision.timestamp).toLocaleString()}</p>
                                <ul class="text-xs list-disc list-inside mt-2 text-gray-700">
                                    <li>Policy: ${trace.decision.policy}</li>
                                    <li>Task: ${trace.decision.task}</li>
                                    <li>Chosen Item: ${trace.decision.chosen_item}</li>
                                    <li>Score: ${trace.decision.score}</li>
                                </ul>
                            </div>
                            <div class="timeline-item">
                                <p class="text-xs font-semibold">Events</p>
                                <ul class="text-xs list-disc list-inside mt-2 text-gray-700">
                                    ${trace.events.map(event => `
                                        <li>${event.type} event (Value: ${event.value}) at ${new Date(event.timestamp).toLocaleTimeString()}</li>
                                    `).join('')}
                                </ul>
                            </div>
                            <div class="timeline-item">
                                <p class="text-xs font-semibold">Reward Computed</p>
                                <p class="text-xs text-gray-500">${new Date(trace.reward.timestamp).toLocaleString()}</p>
                                <ul class="text-xs list-disc list-inside mt-2 text-gray-700">
                                    <li>Total Reward: ${trace.reward.value}</li>
                                    <li>Components: ${JSON.stringify(trace.reward.components)}</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    attributionResults.appendChild(traceContainer);
                } else {
                    attributionResults.innerHTML = `<p class="text-center text-gray-500 text-sm">No trace found for that request ID.</p>`;
                }
            });

            renderExperiments();
            upliftContent.classList.add('hidden');
            noDataMessage.classList.remove('hidden');
        });
    </script>
</body>

</html>

